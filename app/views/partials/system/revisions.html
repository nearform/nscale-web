
<div ng-include="'partials/navbar'"></div>

<div class="container">

  <div class="navbar searchbar">
    <div class="navbar-header">
      <h4 class="title"><a href="/home">Systems</a> <span class="glyphicon glyphicon-chevron-right"></span> <a href="/system/{{ systemId }}">{{ systemName }}</a></h4>
    </div>
    <div ng-include="'partials/system/actionbar'"></div>
  </div>

  <div class="row container-build" ng-show="show_build" scroll-glue>
    <div class="col-lg-12">
      <h4 class="title">Output:</h4>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ progress }}%;">
          {{ progress }}%
        </div>
      </div>
      <ul>
        <li ng-repeat="output in buildOutput">
          <span class="{{ output.type }}">{{ output.text }}</span> <i ng-show="show_spinner" class="fa fa-spinner fa-spin"></i>
        </li>
      </ul>
    </div>
  </div>

  <div class="row-fluid" ng-show="show">

    <div class="col-lg-12">

      <div class="row revisions">
        <div class="col-lg-12">
          <!-- <h4>Revisions</h4> -->
          <br/>
          <ul>

            <!-- <li ng-repeat="revision in revisions" class="revision-row {{ revision.selected ? 'selected' : '' }} {{ revision.deployed ? 'deployed' : '' }}"> -->
            <li ng-repeat="revision in revisions" class="revision-row">
              <time><span>{{ revision.deployed ? 'deployed ' + moment(revision.date).fromNow() : moment(revision.date).fromNow() }}</span> <span>{{ revision.date | date : 'MMM d, y h:mm:ss a' }}</span></time>
              <div class="cbp_tmicon {{ revision.deployed ? 'deployed' : '' }}"></div>
              <div class="revision-title">
                <span>{{ revision.message.split(':')[0] }}</span>
                <br/><a href="/system/{{ systemId }}/revision/{{ revision.id }}"><span class="small">{{ revision.id }}</span></a>
                <!-- TODO deploy not working, need to fix nfd-api deploy integration -->
                <!-- <br/><span class="small"><a ng-show="true" ng-click="deploy(systemId, revision.id)"></span>deploy</a></span> -->
              </div>
            </li>

          </ul>
          <!-- <br>
          <a class="action pull-right" ng-show="true" ng-click="deploy(systemId, selectedRevision.guid)"><span class="glyphicon glyphicon-arrow-up"></span> Deploy</a> -->
        </div>
      </div>

    </div>

  </div>

</div> <!-- /container -->
